import './polyfills.server.mjs';
import{$ as f,Aa as b,Ba as F,Da as z,Ga as A,M as c,R as k,S,U as P,V as s,aa as i,ba as l,ca as a,da as m,ea as w,fa as M,ga as O,ha as g,ia as d,ja as v,ka as C,la as p,ua as K,xa as _,ya as I,za as E}from"./chunk-J4SYXPL3.mjs";var N=(()=>{class n{static{this.\u0275fac=function(e){return new(e||n)}}static{this.\u0275cmp=c({type:n,selectors:[["app-horse"]],standalone:!0,features:[p],decls:1,vars:0,consts:[["src","../../assets/horseChess.svg","alt","\u041A\u043E\u043D\u044C",1,"horse"]],template:function(e,o){e&1&&m(0,"img",0)},styles:[".horse[_ngcontent-%COMP%]{height:50%;width:50%}"]})}}return n})();function H(n,h){n&1&&m(0,"app-horse",4)}function $(n,h){if(n&1&&m(0,"div",5),n&2){let t=d();i("ngClass",t.getDotClass())}}function q(n,h){if(n&1&&(l(0,"span",6),v(1),a()),n&2){let t=d();s(),C(t.moveNumber)}}var B=(()=>{class n{constructor(){this.isKnight=!1,this.id=0,this.moveNumber=0,this.canGo=!1,this.win=!1,this.lose=!1,this.gameStatus=!1,this.cellClick=new P}onClick(){this.cellClick.emit()}getCellClass(){return this.win===!0||this.lose===!0?this.id%2===0?"cell disabled":"cell disabled even":this.id%2===0?this.moveNumber?"cell disabled":"cell":this.moveNumber?"cell disabled even":"cell even"}getDotClass(){return this.id%2===0?"dot even":"dot odd"}static{this.\u0275fac=function(e){return new(e||n)}}static{this.\u0275cmp=c({type:n,selectors:[["app-cell"]],inputs:{isKnight:"isKnight",id:"id",moveNumber:"moveNumber",canGo:"canGo",win:"win",lose:"lose",gameStatus:"gameStatus"},outputs:{cellClick:"cellClick"},standalone:!0,features:[p],decls:4,vars:4,consts:[[3,"click","ngClass"],["class","horse-block",4,"ngIf"],[3,"ngClass",4,"ngIf"],["class","move-number",4,"ngIf"],[1,"horse-block"],[3,"ngClass"],[1,"move-number"]],template:function(e,o){e&1&&(l(0,"article",0),g("click",function(){return o.onClick()}),f(1,H,1,0,"app-horse",1)(2,$,1,1,"div",2)(3,q,2,1,"span",3),a()),e&2&&(i("ngClass",o.getCellClass()),s(),i("ngIf",o.isKnight),s(),i("ngIf",o.canGo&&!o.moveNumber),s(),i("ngIf",o.moveNumber>0&&!o.isKnight))},dependencies:[b,_,E,N],styles:[".cell[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;align-items:center;justify-content:center;position:relative;cursor:pointer}.even[_ngcontent-%COMP%]{background-color:#ff4500;color:#fff}.move-number[_ngcontent-%COMP%]{font-size:2vh}.odd[_ngcontent-%COMP%]{background-color:#fff}.dot[_ngcontent-%COMP%]{height:3vh;width:3vh;border-radius:50%}.disabled[_ngcontent-%COMP%]{cursor:not-allowed}.horse-block[_ngcontent-%COMP%]{width:50%;height:50%;margin:0;padding:0;display:flex;align-items:center;justify-content:center}"]})}}return n})();function J(n,h){if(n&1){let t=O();w(0),l(1,"app-cell",5),g("cellClick",function(){let o=k(t).index,r=d().index,u=d();return S(u.moveKnight(r,o))}),a(),M()}if(n&2){let t=h.index,e=d().index,o=d();s(),i("id",e+t)("isKnight",o.knightPosition.row===e&&o.knightPosition.col===t)("win",o.win)("lose",o.lose)("moveNumber",o.moves[e][t])("canGo",o.isCellAvailable(e,t))}}function L(n,h){if(n&1&&(w(0),f(1,J,2,6,"ng-container",2),M()),n&2){let t=h.$implicit;s(),i("ngForOf",t)}}var T=(()=>{class n{constructor(){this.boardSize=10,this.firstMove=!0,this.win=!1,this.lose=!1,this.currentMove=0,this.validMoves=[],this.board=Array.from({length:this.boardSize},()=>Array(this.boardSize).fill(!1)),this.moves=Array.from({length:this.boardSize},()=>Array(this.boardSize).fill(0)),this.knightPosition={row:-1,col:-1},this.wasKnight=[],this.validMoves=[]}reset(){this.wasKnight=[],this.currentMove=0,this.win=!1,this.lose=!1,this.knightPosition={row:-1,col:-1},this.moves=Array.from({length:this.boardSize},()=>Array(this.boardSize).fill(0)),this.validMoves=[],this.firstMove=!0}placeKnight(t,e){this.board[t][e]=!0,this.moves[t][e]=++this.currentMove,this.knightPosition={row:t,col:e},this.wasKnight.push({row:t,col:e})}moveKnight(t,e){this.firstMove?(this.placeKnight(t,e),this.validMoves=this.getValidMoves(),this.firstMove=!1):this.wasKnight.some(o=>o.row===t&&o.col===e)||this.getValidMoves().some(r=>r.row===t&&r.col===e)&&(this.board[this.knightPosition.row][this.knightPosition.col]=!1,this.placeKnight(t,e),this.validMoves=this.getValidMoves(),this.currentMove===this.boardSize*this.boardSize&&(this.win=!0),this.validMoves.length===0&&this.win!==!0&&(this.lose=!0))}getValidMoves(){let t=[{row:-2,col:-1},{row:-1,col:-2},{row:1,col:-2},{row:2,col:-1},{row:2,col:1},{row:1,col:2},{row:-1,col:2},{row:-2,col:1}],e=[];for(let o of t){let r=this.knightPosition.row+o.row,u=this.knightPosition.col+o.col;this.isInBounds(r,u)&&!this.wasKnight.some(y=>y.row===r&&y.col===u)&&e.push({row:r,col:u,canGo:!0})}return e}isInBounds(t,e){return t>=0&&t<this.boardSize&&e>=0&&e<this.boardSize}isCellAvailable(t,e){return this.validMoves.some(o=>o.row===t&&o.col===e)}static{this.\u0275fac=function(e){return new(e||n)}}static{this.\u0275cmp=c({type:n,selectors:[["app-board"]],standalone:!0,features:[p],decls:7,vars:3,consts:[[3,"ngClass"],[1,"board"],[4,"ngFor","ngForOf"],[1,"drop-block"],[1,"drop-block__button",3,"click"],[3,"cellClick","id","isKnight","win","lose","moveNumber","canGo"]],template:function(e,o){e&1&&(l(0,"p",0),v(1),a(),l(2,"section",1),f(3,L,2,1,"ng-container",2),a(),l(4,"section",3)(5,"button",4),g("click",function(){return o.reset()}),v(6,"\u0421\u0431\u0440\u043E\u0441"),a()()),e&2&&(i("ngClass",o.lose?"text lose":o.win?"text win":"text"),s(),C(o.lose?"\u0412\u044B \u043F\u0440\u043E\u0438\u0433\u0440\u0430\u043B\u0438":o.win?"\u0412\u044B \u043F\u043E\u0431\u0435\u0434\u0438\u043B\u0438!":"\u0418\u0434\u0435\u0442 \u0438\u0433\u0440\u0430"),s(2),i("ngForOf",o.board))},dependencies:[B,b,_,I],styles:[".board[_ngcontent-%COMP%]{height:90%;width:90%;border:2px solid orangered;display:grid;grid-template-columns:repeat(10,1fr);grid-template-rows:repeat(10,1fr)}.drop-block[_ngcontent-%COMP%]{height:10vh;width:100%;display:flex;align-items:center;justify-content:center}.drop-block__button[_ngcontent-%COMP%]{width:20%;height:70%;border-radius:12px;background-color:#000;cursor:pointer;color:#fff;font-size:2vh;transition-duration:.4s}.drop-block__button[_ngcontent-%COMP%]:hover{background-color:#202020}.text[_ngcontent-%COMP%]{font-size:2.4vh;margin:10px;transition-duration:.4s;width:20%;border-radius:8px;text-align:center;padding:5px;color:#fff;background-color:#000}.win[_ngcontent-%COMP%]{background-color:#006400}.lose[_ngcontent-%COMP%]{background-color:#8b0000}"]})}}return n})();var D=(()=>{class n{constructor(){this.title="atomic-knight"}static{this.\u0275fac=function(e){return new(e||n)}}static{this.\u0275cmp=c({type:n,selectors:[["app-root"]],standalone:!0,features:[p],decls:2,vars:0,consts:[[1,"main"],[1,"board-block"]],template:function(e,o){e&1&&(l(0,"main",0),m(1,"app-board",1),a())},dependencies:[T],styles:[".main[_ngcontent-%COMP%]{height:100vh;width:100vw;display:flex;align-items:center;justify-content:center;flex-direction:column}.board-block[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;align-items:center;justify-content:center;flex-direction:column}"]})}}return n})();var G={providers:[z()]};var Q={providers:[A()]},V=K(G,Q);var U=()=>F(D,V),ve=U;export{ve as a};
